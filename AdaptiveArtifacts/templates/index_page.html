<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:py="http://genshi.edgewall.org/"
      xmlns:xi="http://www.w3.org/2001/XInclude">
  <xi:include href="layout.html" />

  <py:def function="spec_markup(specs, page_nr=0)">
      <ul py:if="specs">
      <py:for each="spec,subspecs,arts_count in specs">
              <li id="spec-${spec.get_id()}">
                  <div py:choose="">
                  <a py:when="spec.get_id() == selected_spec.get_id()" class="selected" href="${req.href.adaptiveartifacts(spec=spec.get_id(), page=page_nr)}">${spec.get_name()} <py:if test="arts_count>0 or len(subspecs)>0">(<py:if test="arts_count>0">${len(subspecs)}❖</py:if> <py:if test="arts_count>0">${arts_count}⟐</py:if>)</py:if></a>
                  <a  py:otherwise="" href="${req.href.adaptiveartifacts(spec=spec.get_id(), page=page_nr)}">${spec.get_name()} <py:if test="arts_count>0 or len(subspecs)>0">(<py:if test="arts_count>0">${len(subspecs)}❖</py:if> <py:if test="arts_count>0">${arts_count}⟐</py:if>)</py:if></a>
                  <py:if test="subspecs">
                      ${spec_markup(subspecs)}
                  </py:if>
              </div>
          </li>
      </py:for>
      </ul>
  </py:def>

  <head><title></title></head>
  <body>
     <div id="content" class="search">
        <h1>Adaptive Artifacts</h1>
        <div id="entry-points" class="tree">
            <h2>By Spec</h2>
            <div id="specs">
            ${spec_markup(specs)}
            </div>
            <form method="get" action="${href.adaptiveartifacts('spec')}">
                <input type="hidden" name="action" value="new" />
                <input type="submit" value="New Spec" />
            </form>

            <h2>By Other Features</h2>
            <div id="others">
                <ul>
                    <li><a href="">+</a> <a href="${req.href.adaptiveartifacts('search/no_spec', action='list')}">Artifacts with no spec (63⟐)</a></li>
                </ul>
            </div>
            <br/><br/>
        </div>

        <div id="artifacts">
            <h2>${selected_spec.get_name()}</h2> <span class="spec-options"><a href="${req.href.adaptiveartifacts('spec', selected_spec.get_id(), action='view')}">[details]</a><a href="${req.href.adaptiveartifacts('spec', selected_spec.get_id(), action='edit')}">[edit]</a></span>
            <div class="spec-details">
            ${len(spec_columns)} Attributes;
            <!-- X Subspecs; -->
            ${len(artifacts_values)} Adaptive Artifacts.
            </div>

            <!--
            <div class="paging">
                <span><span class="current">1</span></span>
                <span><a href="/my-trac-environment/search?asa=on&amp;changeset=on&amp;milestone=on&amp;ticket=on&amp;wiki=on&amp;q=trac&amp;page=2&amp;noquickjump=1" title="page 2">2</a></span>
                <span class="next"><a href="/my-trac-environment/search?asa=on&amp;changeset=on&amp;milestone=on&amp;ticket=on&amp;wiki=on&amp;q=trac&amp;page=2&amp;noquickjump=1" title="Next Page">→</a></span>
            </div>
            -->
            <h3>Adaptive Artifacts</h3>

            <table class="listing">
                <thead>
                    <tr>
                        <py:for each="column in spec_columns"><th>${column}</th></py:for>
                        <py:for each="column in arti_columns"><th style="font-style:italic;">${column}</th></py:for>
                        <th class="artifact-pages">Pages</th>
                        <th class="artifact-options">Options</th>
                    </tr>
                </thead>
                <py:for each="artifact,values in artifacts_values">
                    <tr>
                        <py:for each="value in values">
                            <td>${value}</td>
                        </py:for>
                        <td class="artifact-pages"><a href="#">42</a></td>
                        <td class="artifact-options"><a href="${req.href.adaptiveartifacts('artifact', artifact.get_id(), action='view')}">[view]</a> <a href="${req.href.adaptiveartifacts('artifact', artifact.get_id(), action='edit')}">[edit]</a></td>
                    </tr>
                </py:for>
            </table>

            <!--
            <div class="paging">
                <span><span class="current">1</span></span>
                <span><a href="/my-trac-environment/search?asa=on&amp;changeset=on&amp;milestone=on&amp;ticket=on&amp;wiki=on&amp;q=trac&amp;page=2&amp;noquickjump=1" title="page 2">2</a></span>
                <span class="next"><a href="/my-trac-environment/search?asa=on&amp;changeset=on&amp;milestone=on&amp;ticket=on&amp;wiki=on&amp;q=trac&amp;page=2&amp;noquickjump=1" title="Next Page">→</a></span>
            </div>
            -->
            <br/><br/>
            <form method="get" action="${href.adaptiveartifacts('artifact')}">
                <input type="hidden" name="action" value="new" />
                <input type="submit" value="New Artifact" />
            </form>
        </div>

        <br/><br/>

     </div>
  </body>
</html>
